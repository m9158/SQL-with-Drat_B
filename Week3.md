# SQL_BASIC 3주차 정규 과제 

📌SQL_BASIC 정규과제는 매주 정해진 분량의 `초보자를 위한 BigQuery(SQL) 입문` 강의를 듣고 간단한 문제를 풀면서 학습하는 것입니다. 이번주는 아래의 **SQL_Basic_3rd_TIL**에 나열된 분량을 수강하고 `학습 목표`에 맞게 공부하시면 됩니다.

**3주차 과제는 문제 풀이를 중심으로**, 강의에서 제시된 예제 문제 중 **7 문제 이상을 선택하여 직접 풀어본 뒤**, 강의 영상의 풀이와 비교해 **틀린 부분, 맞은 부분, 새롭게 배운 개념**을 구체적으로 정리해주세요. (적어도 3문제는 정리해야 합니다.) 완성된 과제는 Gihub에 업로드하고, 링크를 스프레드시트 'SQL' 시트에 입력해 제출해주세요.

**(수행 인증샷은 필수입니다.)** 

## SQL_BASIC_3rd

### 섹션 3. 데이터 탐색 - 조건, 추출, 요약

### 2-6. 연습문제 1~3번

### 2-6. 연습문제 7~9번

### 2-6. 연습문제 10~12번

### 2-6. 연습문제 13~17번

### 2-7. 정리 

### 2-8. 새로운 집계함수



## 섹션 4. 쿼리 잘 작성하기, 쿼리 작성 템플릿 및 오류를 잘 디버깅하기

### 3-1. INTRO

### 3-2. SQL 쿼리 작성하는 흐름

### 3-3. 쿼리 작성 템플릿과 생산성 도구 



## 🏁 강의 수강 (Study Schedule)

| 주차  | 공부 범위              | 완료 여부 |
| ----- | ---------------------- | --------- |
| 1주차 | 섹션 **1-1** ~ **2-2** | ✅         |
| 2주차 | 섹션 **2-3** ~ **2-5** | ✅         |
| 3주차 | 섹션 **2-6** ~ **3-3** | ✅         |
| 4주차 | 섹션 **3-4** ~ **4-4** | 🍽️         |
| 5주차 | 섹션 **4-4** ~ **4-9** | 🍽️         |
| 6주차 | 섹션 **5-1** ~ **5-7** | 🍽️         |
| 7주차 | 섹션 **6-1** ~ **6-6** | 🍽️         |

<br>

<!-- 여기까진 그대로 둬 주세요-->

---

# 1️⃣ 개념정리

## 2-6. 연습문제

~~~
✅ 학습 목표 :
* 연습문제(7문제 이상) 푼 것들 정리하기
~~~
~~~
1번 문제: NULL과 조건에 AND, OR

- NULL: 존재하지 않는 값. 연산을 할 수 없는 값. ex) type2가 없다 : type2 IS NULL (반대는 IS NOT NULL)
- AND: WHERE 조건문에서 사용. () AND () 하면, 두개의 조건이 모두 만족하는 값이 나옴
- OR: WHERE 조건문에서 사용. () OR () 하면, 두 괄호 중 하나만 만족해도 결과값이 나옴
<!-- 새롭게 배운 내용을 자유롭게 정리해주세요.-->
~~~
~~~
2번 문제: 집계함수의 조건

- 집계 함수는 GROUP BY와 같이 다님. 집계하는 기준(컬럼)이 없으면 COUNT만 쓸 수 있으나, 집계하는 기준이 있다면, 그 기준을 GROUP BY에 써줘야 한다.

3번 문제: ~~와 상관없이, DISTINCT

- 조건에서 ~~와 상관없이라고 나오면, 조건이 아님. 그냥 수를 세면 됨
- DISTINCT 언제 쓸까? => 조유한 값만 보고 싶을 때 사용한다, 유니크한 값만 알고 싶은 경우 => 중복이 없는 것
~~~
~~~
4번 문제: GRUOP BY의 활용

- GROUP BY : is_legendary가 길다. GROUP BY에 컬럼이 많을 수 있음 => GRUOP BY 1 => SELECT문의 첫번째를 의미함, ORDER BY도 가능
~~~
~~~
7번 문제 (오답)

<img width="284" height="96" alt="image" src="https://github.com/user-attachments/assets/a933dfbb-5c01-4e0b-837c-736e0ed29296" />

테이블을 Trainer로 불러와야 했는데 Pokemon으로 불러옴

- IN ("", "", ...) => OR로 일일히 묶는 것이 어렵다면, IN을 쓰고 하나로 묶으면 됨.
~~~
~~~
9번 문제 (오답)

<img width="182" height="56" alt="image" src="https://github.com/user-attachments/assets/34fe13a9-bb9c-4930-94c7-bace3283c713" />

1. 컬럼명을 먼저 써주고, 집계할 때 id로 해줘야함
2. GROUP BY를 해줘야함

SELECT
 generation,
 COUNT(id) AS cnt
FROM Basic.Pokemon
GROUP BY 
  generation

  가 정답.
~~~
~~~
11번 문제: LIMIT

  - 내가 보고 싶은 가장 상단의 열만 보고 싶을 경우, LIMIT 1을 해주면 됨
~~~
~~~
13번 문제: LIKE

- 컬럼 LIKE "특정단어%". %는 앞에도, 뒤에도 붙을 수 있음.
- "%파" = 파로 끝나는 단어, "파%" = 파로 시작하는 단어. "%파%" = 파가 들어간 단어
- 문자열 컬럼에서 특정 단어가 포함되어 있는지 알고 싶은 경우엔 LIKE를 사용하면 편함
~~~
~~~
14번 문제: 의문

- GROUP BY trainer_cnt를 했을 때 왜 오류가 나는가.. 6개, 7개, 8개인 트레이너 별로 그룹화되는 것이 아닌가??
~~~
~~~
15번 문제: 오답

- 풀이:
  
-- 테이블: Trainer_Pokemon
-- 조건: 없음
-- 컬럼: trainer_id
-- 집계: 포켓몬의 수 => COUNT

SELECT
  trainer_id,
  COUNT(Pokemon_id) AS Pokemon_cnt
FROM Basic.Trainer_Pokemon
GROUP BY 
  trainer_id
~~~
~~~
17번 문제: 오답

-- 테이블: Trainer_Pokemon
-- 조건: 풀어준 포켓몬/전체 포켓몬 >= 20%
-- 컬럼: trainer_id
-- 집계: COUNTIF

-- COUNTIF(조건) : COUNTIF(컬럼 = "3") => WHERE 조건을 걸면서 COUNT를 해주는 것. 특정 컬럼 상태를 나타낼 수 있다.

SELECT
  trainer_id,
  COUNTIF(status = "Released") AS released_cnt, # 풀어준 포켓몬의 수
  COUNT(pokemon_id) AS pokemon_cnt,
  COUNTIF(status = "Released")/COUNT(pokemon_id) AS released_ratio # /를 통해 나누기 적용
FROM Basic.Trainer_Pokemon
GROUP BY
  trainer_id
HAVING
  released_ratio >= 0.2 # COUNIF도 집계 함수이기 때문에 HAVING으로 조건을 걸어줘야함.
~~~

## 2-8. 새로운 집계함수

~~~
✅ 학습 목표 :
* SQL 쿼리 구조를 이해할 수 있다. 
* SELECT, FROM, WHERE을 활용하는 방법을 설명할 수 있다. 
~~~

1. GROUP BY ALL

   - 하나하나 컬럼을 입력해줄 필요가 없이 알아서 추론해서 컬럼을 GROUP BY 해주는 기능
<!-- 새롭게 배운 내용을 자유롭게 정리해주세요.-->



## 3-2. 쿼리를 작성하는 흐름

~~~
✅ 학습 목표 :
* 쿼리를 작성하는 흐름을 설명할 수 있다.
~~~

1. 지표 고민 => 어떤 문제를 해결하기 위해 데이터가 필요한가?

2. 지표 구체화 => 추상적이지 않고 구체적인 지표 명시 (분자, 분모 표시) # 정의, 이름을 구체적으로 작성해주어야 한다.

3. 지표 탐색 => 유사한 문제를 해결한 케이스가 있나 확인
   - 존재한다 => 해당 쿼리 리뷰를 해야함
   - 존재하지 않는다 => 구글 검색을 통해 사용하고 있는 지표 확인.

4. 지표가 없을 경우, 쿼리 작성 => 데이터가 있는 테이블 찾기 # ERD 확인하기
   - 사용해야하는 테이블 1개 -> 활용
   - 사용해야하는 테이블 2개 -> 연결 방법 고민(JOIN)  # 단계적으로 확인

5. 데이터 정합성 확인 => 예상한 결과와 동일 한지 확인

6. 쿼리 가독성 => 나중을 위해 깔끔하게 쿼리 작성

7. 쿼리 저장 => 쿼리는 재사용되므로 문서로 저장

<!-- 새롭게 배운 내용을 자유롭게 정리해주세요.-->



## 3-3. 쿼리 작성 템플릿과 생산성 도구

~~~
✅ 학습 목표 :
* 생산성 도구를 만들 수 있다.
~~~
ESPANSO의 기술적 문제로 다운로드가 되지 않아 글로 대체하겠습니다. 고쳐보겠습니다..!!

- trigger: ":sql"
  replace: |
            # 쿼리를 작성하는 목표, 확인할 지표
            # 쿼리 계산 방법:
            # 데이터의 기간:
            # 사용할 테이블:
            # Join KEY:
            # 데이터 특징:

         SELECT

         FROM
         WHERE
<!-- 이어질 주차에서 생산성 도구를 활용한 실습이 있습니다.강의에 맞게 제작하여 화면을 캡쳐하여 이 주석을 지우고 올려주세요. -->



<br>
<br>

---

# 2️⃣ 학습 인증란

<img width="391" height="876" alt="image" src="https://github.com/user-attachments/assets/3695acdf-8bfb-4c98-a9e7-677b4712487f" />




<br><br>



---

# 3️⃣ 확인문제

## 문제 1

> **🧚Q. 포켓몬 게임에 재미를 느낀 동혁은 포켓몬 도감에서 강력한 포켓몬 타입을 미리 선점하기 위해, 먼저 어떤 포켓몬들이 있는지 포켓몬 수를 기준으로 내림차순 정렬하여  확인하고자 했습니다.**
>
> 그래서 다음과 같은 필요한 정보를 미리 정리해보았습니다. 

~~~
조건 : type2는 상관없이
보고 싶은 컬럼 : type1
집계 내용 : 각 type1 별 포켓몬 수
정렬 기준 : 포켓몬 수를 기준으로 내림차순 정렬
~~~

> **이 목표를 바탕으로 동혁이 아래와 같은 쿼리를 잘 작성했지만, 일부 SQL 문법 요소를 빼먹었습니다. 비어 있는 부분인 ㄱ,ㄴ,ㄷ 에 들어갈 알맞은 SQL 구문을 채워보세요:**

~~~sql
SELECT type1, (ㄱ)
FROM pokemon
(ㄴ) type1
ORDER BY (ㄱ) (ㄷ);
~~~



~~~
(ㄱ) = COUNT(id) AS pokemon_cnt
(ㄴ) = GROUP BY
(ㄷ) = DESC
~~~



### 🎉 수고하셨습니다.
